<!DOCTYPE html>
<html>
<head>
    <title>!</title>
</head>
<body>
    <div>
        avalon.mix = avalon.fn.mix = function() {
            var options, name, src, copy, copyIsArray, clone,
                target = arguments[0] || {},
                i = 1,
                length = arguments.length,
                deep = false
          
            // 如果第一个参数为布尔,判定是否深拷贝
            if (typeof target === 'boolean') {
                deep = target
                target = arguments[1] || {}
                i++
            }
          
            //确保接受方为一个复杂的数据类型
            if (typeof target !== 'object' && typeof target !== 'function') {
                target = {}
            }
          
            //如果只有一个参数，那么新成员添加于mix所在的对象上
            if (i === length) {
                target = this
                i--
            }
          
            for (; i < length; i++) {
                //只处理非空参数
                if ((options = arguments[i]) != null) {
                    for (name in options) {
                        src = target[name]
                        copy = options[name]
          
                        // 防止环引用
                        if (target === copy) {
                            continue
                        }
                        if (deep && copy && (avalon.isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {
          
                            if (copyIsArray) {
                                copyIsArray = false
                                clone = src && Array.isArray(src) ? src : []
          
                            } else {
                                clone = src && avalon.isPlainObject(src) ? src : {}
                            }
          
                            target[name] = avalon.mix(deep, clone, copy)
                        } else if (copy !== void 0) {
                            target[name] = copy
                        }
                    }
                }
            }
            return target
        <!-- <input type="text" id="throttle"/> -->
    </div>
    <script type="text/javascript" src="./index.js"></script>
    <script type="text/javascript" src="./bt.js"></script>
    <script type="text/javascript" src="./tree.js"></script>
    <script type="text/javascript" src="./avalon.js"></script>
    <script>
        window.onload = () => {
            function ajax (data) {
                console.log(new Date().toLocaleTimeString() + ' - ' + data)
            }

            // function throttle (fn, delay) {
            //     return args => {
            //         if (fn.id) return

            //         fn.id = setTimeout(() => {
            //             fn.call(this, args)
            //             clearTimeout(fn.id)
            //             fn.id = null
            //         }, delay)
            //     }
            // }
            function throttle (fn, delay) {
                let last = 0;

                return function(args) {
                    let now = + Date.now();
                    if(now >= last + delay) {
                        fn(args);
                        last = now;
                        console.log('OK!')
                    } else {
                        console.log('还没到时间捏～')
                    }
                }
            }

            const throttleAjax = throttle(ajax, 3000)

            // document.querySelector('#throttle').addEventListener('keyup', e => {
            //     throttleAjax(e.target.value)
            // })
        }
    </script>
</body>
</html>